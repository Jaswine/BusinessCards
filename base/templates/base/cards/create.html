{% include 'main.html' %}

{% load static i18n %}

{% block title %}
<link rel="stylesheet" href="{% static 'css/create.css' %}">
<title>{% trans 'Create Card' %}</title>
{% endblock title %}

{% block content %}
{% include 'base/header.html' %}
<div class="page">
    <form action="" method="POST">
        {% csrf_token %}
        <h2>{% trans 'Create A New Card' %}</h2>

        <div class="form__translate">
            <div class="form__translate__buttons">
                <button type="button" class="translate__button__selected">Ru</button>
                <button type="button" class="">Kk</button>
                <button type="button" class="">En</button>
            </div>
            <div class="form__translate__fields">
                <div class="form__component translate__field__selected">
                    <label>Название визитки на русском:</label>
                    {{ form.name_ru }}
                </div>
                <div class="form__component">
                    <label>Название визитки на казахском:</label>
                    {{ form.name_kk }}
                </div>
                <div class="form__component">
                    <label>Название визитки на английском:</label>
                    {{ form.name_en }}
                </div>
            </div>
        </div>

        <script>
            const form__translate = document.querySelector('.form__translate')
            const form__components = form__translate.querySelectorAll('.form__component')
            const buttons = form__translate.querySelectorAll('button')

            console.log(form__translate, form__components, buttons)

            const reset_all_settings = () => {
                console.log('reset_all_settings')
                buttons.forEach(button => button.classList.remove('translate__button__selected'))
                form__components.forEach(input => input.classList.remove('translate__field__selected'))
            }

            for (let i = 0; i < form__components.length; i++) {
                buttons[i].addEventListener('click', () => {
                    console.log('click')
                    reset_all_settings()
                    buttons[i].classList.add('translate__button__selected')
                    form__components[i].classList.add('translate__field__selected')
                })
            }
        </script>

        <div class="form__component">
            <label>Автор визитки:</label>
            <select name="user" required>
                <option value="create_new">{% trans 'Create New' %}</option>
                {% for user in users %}
                    <option value="{{ user.id }}">
                        {{ user.username }}
                        {% if user.email %} - {{user.email}}{% endif %}
                    </option>
                {% endfor %}
            </select>
        </div>

            <button class="btn">{% trans 'Save' %}</button>

    </form>
</div>
{% endblock content %}